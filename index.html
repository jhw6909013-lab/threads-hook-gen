<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threads çˆ†æ¬¾é‰¤å­ç”Ÿæˆå™¨ // PROTOCOL: GATLING</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        body { font-family: 'Share Tech Mono', monospace; }
        .cyber-border { border: 1px solid #34d399; box-shadow: 0 0 10px #34d399; }
        .cyber-input { background: rgba(0, 20, 0, 0.8); border: 1px solid #065f46; color: #34d399; }
        .cyber-input:focus { outline: none; border-color: #34d399; box-shadow: 0 0 5px #34d399; }
        .loading-scan { width: 100%; height: 2px; background: #064e3b; position: relative; overflow: hidden; }
        .loading-scan::after { content: ''; position: absolute; top: 0; left: 0; height: 100%; width: 50%; background: #34d399; animation: scan 1s infinite linear; }
        @keyframes scan { 0% { left: -50%; } 100% { left: 100%; } }
    </style>
</head>
<body class="bg-gray-900 text-green-400 min-h-screen flex items-center justify-center p-4 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">

    <div class="max-w-md w-full bg-black bg-opacity-90 p-6 rounded-lg cyber-border relative">
        <h1 class="text-2xl font-bold text-center mb-2 tracking-widest text-green-300">VIRAL HOOK GEN</h1>
        <!-- è­˜åˆ¥ç¢¼ï¼šçœ‹åˆ°é€™å€‹æ‰ä»£è¡¨æ›´æ–°æˆåŠŸ -->
        <p class="text-xs text-center text-green-700 mb-6">SYSTEM STATUS: AUTO-TARGETING // VER 3.0</p>

        <div class="space-y-4">
            <div>
                <label class="block text-xs mb-1 opacity-70">TARGET TOPIC [è¼¸å…¥ä¸»é¡Œ]</label>
                <input type="text" id="topicInput" placeholder="ä¾‹å¦‚ï¼šAIè®Šç¾ã€æ‹’çµ•å…§è€—" class="w-full p-2 rounded cyber-input">
            </div>
            <div>
                <label class="block text-xs mb-1 opacity-70">TONE MODE [èªæ°£é¸æ“‡]</label>
                <select id="toneSelect" class="w-full p-2 rounded cyber-input">
                    <option value="æ‡¸ç–‘">æ‡¸ç–‘ (Suspense)</option>
                    <option value="æ¯’èˆŒ">æ¯’èˆŒ (Savage)</option>
                    <option value="æº«æš–">æº«æš– (Warm)</option>
                    <option value="çˆ­è­°">çˆ­è­° (Controversial)</option>
                </select>
            </div>
            <button id="generateBtn" class="w-full bg-green-900 hover:bg-green-700 text-green-300 border border-green-500 p-2 rounded font-bold transition-all duration-200 uppercase tracking-widest hover:shadow-[0_0_15px_#34d399]">
                INITIATE GENERATION
            </button>
        </div>

        <div id="loadingBar" class="hidden mt-4">
            <p id="loadingText" class="text-xs text-center mb-1 animate-pulse">SCANNING MODELS...</p>
            <div class="loading-scan"></div>
        </div>
        <div id="outputArea" class="mt-6 space-y-3 hidden"></div>
        
        <div class="mt-8 pt-4 border-t border-green-900 text-center text-xs text-green-600">
            <p id="modelUsedText">WAITING FOR INPUT</p>
        </div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        // âœ… æ‚¨çš„ PETAPI KEY
        const API_KEY = 'AIzaSyB7x6ApY35Bq1tnyYren00YoJNtTgf3thY'; 
        const genAI = new GoogleGenerativeAI(API_KEY);

        // ğŸ”« åŠ ç‰¹æ—æˆ°è¡“ï¼šå®šç¾©æ‰€æœ‰å¯èƒ½çš„æ¨¡å‹åç¨±ï¼Œä¾åºå°„æ“Š
        const MODEL_LIST = [
            "gemini-1.5-flash",
            "gemini-1.5-flash-latest",
            "gemini-1.5-flash-001",
            "gemini-1.5-pro",
            "gemini-pro",
            "gemini-1.0-pro"
        ];

        const generateBtn = document.getElementById('generateBtn');
        const topicInput = document.getElementById('topicInput');
        const toneSelect = document.getElementById('toneSelect');
        const outputArea = document.getElementById('outputArea');
        const loadingBar = document.getElementById('loadingBar');
        const loadingText = document.getElementById('loadingText');
        const modelUsedText = document.getElementById('modelUsedText');

        generateBtn.addEventListener('click', async () => {
            const topic = topicInput.value.trim();
            const tone = toneSelect.value;
            if (!topic) { alert('âš ï¸ ERROR: è«‹è¼¸å…¥ä¸»é¡Œ'); return; }

            loadingBar.classList.remove('hidden');
            outputArea.classList.add('hidden');
            outputArea.innerHTML = '';
            generateBtn.disabled = true;

            let success = false;
            let finalError = null;

            // ğŸ”„ è¿´åœˆå˜—è©¦æ¯ä¸€å€‹æ¨¡å‹
            for (const modelName of MODEL_LIST) {
                try {
                    loadingText.innerText = `TRYING MODEL: ${modelName.toUpperCase()}...`;
                    
                    const model = genAI.getGenerativeModel({ model: modelName });
                    
                    const prompt = `ä½ æ˜¯ä¸€å€‹Threadsçˆ†æ¬¾æ–‡æ¡ˆå°ˆå®¶ã€‚è«‹é‡å°ä¸»é¡Œã€Œ${topic}ã€ï¼Œç”¨ã€Œ${tone}ã€çš„èªæ°£ï¼Œç”Ÿæˆ 3 å€‹æ¥µå…·å¸å¼•åŠ›ã€è®“äººå¿ä¸ä½é»é–‹å…¨æ–‡çš„ã€Œç¬¬ä¸€å¥è©±ã€(Hook)ã€‚ç¹é«”ä¸­æ–‡ï¼Œä¸è¶…é40å­—ï¼Œåå¸¸è­˜ã€‚ç›´æ¥çµ¦3å¥ï¼Œä¸è¦ç·¨è™Ÿã€‚`;
                    
                    const result = await model.generateContent(prompt);
                    const response = await result.response;
                    const text = response.text();
                    const hooks = text.split('\n').filter(line => line.trim() !== '');

                    // å¦‚æœæˆåŠŸåŸ·è¡Œåˆ°é€™è£¡ï¼Œä»£è¡¨é€™å€‹æ¨¡å‹å¯ç”¨
                    renderHooks(hooks);
                    modelUsedText.innerText = `POWERED BY ${modelName.toUpperCase()}`;
                    success = true;
                    break; // æˆåŠŸå°±è·³å‡ºè¿´åœˆ

                } catch (error) {
                    console.warn(`Model ${modelName} failed:`, error);
                    finalError = error;
                    // ç¹¼çºŒå˜—è©¦ä¸‹ä¸€å€‹æ¨¡å‹
                }
            }

            if (!success) {
                outputArea.classList.remove('hidden');
                outputArea.innerHTML = `
                    <div class="text-red-500 text-center text-xs p-2 border border-red-500">
                        ç³»çµ±å´©æ½°ï¼šæ‰€æœ‰æ¨¡å‹çš†ç„¡æ³•é€£ç·šã€‚<br>
                        æœ€å¾ŒéŒ¯èª¤ä»£ç¢¼ï¼š${finalError?.message}<br><br>
                        ğŸš¨ è«‹å‹™å¿…æª¢æŸ¥ Google Cloud Consoleï¼š<br>
                        1. æ‚¨çš„ Key æ˜¯å¦è¢«è¨­ç‚ºã€Œé™åˆ¶ Keyã€ï¼Ÿè«‹æ”¹ç‚ºã€Œä¸è¨­é™ã€ã€‚<br>
                        2. å¸³å–®å°ˆæ¡ˆæ˜¯å¦æ­£ç¢ºé€£çµï¼Ÿ
                    </div>`;
            }

            loadingBar.classList.add('hidden');
            generateBtn.disabled = false;
            generateBtn.innerText = "INITIATE GENERATION";
        });

        function renderHooks(hooks) {
            outputArea.classList.remove('hidden');
            hooks.slice(0, 3).forEach(hook => {
                const div = document.createElement('div');
                div.className = "bg-green-900 bg-opacity-20 border border-green-800 p-3 rounded flex justify-between items-center";
                div.innerHTML = `<span class="text-sm flex-1 mr-2 tracking-wide">${hook}</span><button class="text-xs bg-black border border-green-600 px-2 py-1 rounded hover:bg-green-600 hover:text-black transition-colors" onclick="navigator.clipboard.writeText('${hook.replace(/'/g, "\\'")}')">COPY</button>`;
                outputArea.appendChild(div);
            });
        }
    </script>
</body>
</html>
